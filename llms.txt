# Diplodoc: Мини-документация для LLM-агентов

## 1. Введение

### YFM (Yandex Flavored Markdown)

Диалект Markdown с инструментами для трансформации в HTML и сборки документационных проектов. Позволяет создавать полноценную документацию с навигацией и интерактивными элементами.

```md
# Заголовок страницы
**Полужирный текст**
*Курсив*
```

- [Подробная информация](./ru/index-yfm.md)

### Преимущества

- Соответствует CommonMark Spec
- Расширенные возможности разметки (заметки, табы, всплывающие подсказки)
- Поддержка переменных и условий для создания вариативного контента
- Переиспользование контента через включения
- Возможность собрать полноценный документационный проект

## 2. Структура проекта

### Основные файлы и папки

```
input-folder
|-- .yfm # файл конфигурации
|-- toc.yaml # оглавление
|-- presets.yaml # пресеты переменных
|-- index.yaml # разводящая страница
|-- pages # файлы с контентом
|    |-- faq.md
|    |-- how-to.md
|-- _assets # каталог с изображениями
|    |-- image1.png
|-- _includes # каталог для переиспользования
|    |-- shared_block.md
```

- [Подробная информация](./ru/project/index.md)

## 3. Оглавление документа (toc.yaml)

### Структура файла

Описывает структуру документации и навигацию. Файлы, не указанные в toc.yaml, не обрабатываются при сборке.

```yaml
title: Имя документа
href: index.yaml
items:
  - name: Имя раздела
    href: path/to/file.md
  - name: Имя группы разделов
    items:
      - name: Имя раздела
        href: path/to/file.md
```

- [Подробная информация](./ru/project/toc.md)

### Условия видимости разделов

Позволяют включать или исключать разделы в зависимости от значений переменных.

```yaml
- name: Раздел с условным вхождением
  href: path/to/conditional/file.md
  when: version == 12
```

- [Подробная информация](./ru/project/toc.md#when)

### Включение оглавлений

Разбейте большое оглавление на модули для лучшей поддерживаемости.

```yaml
# Как раздел
- name: Имя заимствованного блока
  include:
    path: another/toc.yaml

# Без создания раздела
- include: { path: path/to/toc.yaml }
```

- [Подробная информация](./ru/project/toc.md#includes)

## 4. Переменные и пресеты

### Подстановки переменных

Используйте для вставки динамических значений в текст.

```md
Какой-то текст {{ имя_переменной }} продолжение текста.
```

- [Подробная информация](./ru/syntax/vars.md#subtitudes)

### Условные операторы

Включайте разный контент в зависимости от условий.

```md
{% if OS == 'iOS' %}
Скачайте приложение в [App Store](https://apple.com).
{% else %}
Скачайте приложение в [Google Play](https://play.google.com).
{% endif %}
```

- [Подробная информация](./ru/syntax/vars.md#conditions)

### Циклы

Создавайте повторяющийся контент на основе массива данных.

```md
{% for user in users %}
- {{ user.name }}: {{ user.role }}
{% endfor %}
```

- [Подробная информация](./ru/syntax/vars.md#cycles)

### Фильтры и функции

Модифицируйте значения переменных с помощью фильтров и функций.

```md
{{ user.name | capitalize }}
{{ users | length }}
{{ user.name.slice(1, 3) }}
```

- [Подробная информация](./ru/syntax/vars.md#filters)

### Пресеты переменных

Поддерживайте несколько вариантов документации (например, внутреннюю и публичную) из одних файлов.

```yaml
# presets.yaml
default:
    position: Волшебник
internal:
    place: Изумрудный город
external:
    place: Страна Оз
```

- [Подробная информация](./ru/project/presets.md)

## 5. Расширения Markdown

### Notes (заметки)

Выделяющиеся блоки с важной информацией. Используйте для примечаний, советов, предупреждений.

```md
{% note info %}
Это примечание с дополнительной информацией.
{% endnote %}

{% note warning "Внимание!" %}
Это важное предупреждение.
{% endnote %}
```

- [Подробная информация](./ru/syntax/notes.md)

### Cuts (каты)

Скрывают часть контента, который отображается по клику. Полезны для длинных блоков кода.

```md
{% cut "Посмотреть пример кода" %}
function example() {
  return 'Этот код скрыт, пока пользователь не кликнет';
}
{% endcut %}
```

- [Подробная информация](./ru/syntax/interactive-elements/cuts.md)

### Tabs (табы)

Взаимоисключающие разделы для альтернативных инструкций, например для разных ОС.

```md
{% list tabs %}

- Windows

  Инструкции для Windows.

- macOS {selected}

  Инструкции для macOS (открыты по умолчанию).

- Linux

  Инструкции для Linux.

{% endlist %}
```

- [Подробная информация](./ru/syntax/interactive-elements/tabs.md)

### Radio (радиобаттоны)

Подобны табам, используются для разделения инструкций по категориям.

```md
{% list tabs radio %}

- Для начинающих

  Базовые инструкции.

- Для опытных {selected}

  Продвинутые техники.

{% endlist %}
```

- [Подробная информация](./ru/syntax/interactive-elements/radio.md)

### Dropdown (дропдаун)

Выпадающий список для большого количества опций.

```md
{% list tabs dropdown %}

- Вариант 1

  Описание варианта 1.

- Вариант 2

  Описание варианта 2.

{% endlist %}
```

- [Подробная информация](./ru/syntax/interactive-elements/dropdawn.md)

### Accordion (аккордеон)

Раскрывающиеся блоки для организации большого объема информации.

```md
{% list tabs accordion %}

- Раздел 1

  Содержимое раздела 1.

- Раздел 2 {selected}

  Содержимое раздела 2 (открыто по умолчанию).

{% endlist %}
```

- [Подробная информация](./ru/syntax/interactive-elements/accordion.md)

### Term (всплывающие подсказки)

Всплывающие определения терминов при наведении курсора.

```md
В тексте упоминается [термин](*ключ_термина).

[*ключ_термина]: Определение термина.
Может включать _базовую_ разметку.
```

- [Подробная информация](./ru/syntax/term.md)

### Media (медиаконтент)

#### Изображения

Вставляйте изображения с возможностью задания размеров и подсказок.

```md
![Альтернативный текст](_images/image.png "Подсказка при наведении" =100x100)
```

- [Подробная информация](./ru/syntax/media.md#images)

#### Видео

Встраивайте видео с популярных платформ.

```md
@[youtube](https://youtube.com/watch?v=ID_ВИДЕО)
@[vk](https://vk.com/video_ext.php?oid=-ID&id=ID)
```

- [Подробная информация](./ru/syntax/media.md#video)

## 6. Переиспользование контента

### Механизм включения (includes)

Вынесите повторяющийся контент в отдельные файлы для переиспользования.

```md
{% include [Описание блока](../_includes/file.md) %}
{% include notitle [Без заголовка](../_includes/file.md) %}
```

- [Подробная информация](./ru/project/includes.md)

## 7. Сборка документации

### Установка

```shell
npm i @diplodoc/cli -g
```

- [Подробная информация](./ru/tools/docs/index.md#install)

### Команды сборки

```shell
# Стандартная сборка в HTML
yfm -i ./input-folder -o ./output-folder

# Сборка в YFM
yfm -i ./input-folder -o ./output-folder --output-format=md
```

- [Подробная информация](./ru/tools/docs/build.md)

### Параметры сборки

Основные параметры, влияющие на результат сборки:

```
--input, -i        Путь до директории проекта
--output, -o       Путь до директории для выходных данных
--output-format    Формат выходных данных (html или md)
--varsPreset       Используемый пресет переменных
```

- [Подробная информация](./ru/tools/docs/settings.md)

## 8. Автогенерация документации

### Генерация из OpenAPI-спецификации

Автоматически создавайте документацию API из OpenAPI-спецификации.

```yaml
# .yfm
openApiOptions:
  spec: ./path/to/spec.yaml
  targetDir: ./api
```

- [Подробная информация](./ru/guides/openapi.md)

## 9. Кастомизация документации

### Настройки файла конфигурации

Настраивайте внешний вид и поведение документации через файл .yfm.

```yaml
# .yfm
allowHTML: true
langs: ['en','ru']
resources:
  csp:
    - "frame-src":
        - "https://youtube.com"
docs-viewer:
  project-name: diplodoc
  langs: ['en','ru']
```

- [Подробная информация](./ru/project/config.md)

### Разводящие страницы

Создавайте удобные навигационные страницы с карточками разделов.

```yaml
# index.yaml
title: Документация
description: Описание проекта
links:
  - title: Быстрый старт
    description: Начало работы
    href: ./quickstart.md
  - title: API
    description: Справочник API
    href: ./api/index.md
```

- [Подробная информация](./ru/project/leading-page.md)